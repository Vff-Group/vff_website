{% extends "common/base.html" %}
{% load static %}
{% block title %}Orders Assign{% endblock title%}
{% block content %}

<div class="container-fluid py-4">
    <button type="button" class="btn btn-primary" id="liveToastBtn" style="display: none;"></button>

<div class="position-fixed top-0 end-0 p-3" style="z-index: 11">
  <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <img src="{% static 'img/logos/logo.png' %}" class="rounded me-2" style="width: 30px; height:30px;" alt="...">
      <strong class="me-auto">VFF Group</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body bg-light text-dark">
      
    </div>
  </div>
</div>

    <div class="row">
      <div class="col-lg-7">
        <div class="row">
          <div class="col-12">
            <div class="card mb-4">
              <div class="card-header pb-0">
                <form method="get">
                    {% csrf_token %}
                <div class="row">
                    <!-- category start  -->

                    <div class="col-lg-4">
                    
                        <div class="form-group">
                            <label
                              class="form-control-label"
                              for="input-category"
                              >Category</label
                            >
                            <select
                              class="form-control form-control-alternative"
                              id="input-category"
                              name="main_category"
                              required
                              onchange="loadSubCategories(this)"
                            >
                              <option disabled selected>
                                Choose Laundry Category
                              </option>
                              {% for category in category_data %}
                              <option
                                value="{{ category.categoryname }}"
                                data-catids="{{ category.catid }}"
                                data-cat_img="{{ category.cat_img }}"
                                data-cat_name="{{ category.categoryname }}"
                              >
                                {{ category.categoryname }}
                              </option>
                              {% endfor %}

                              <!-- <option value="Other" {% if data.gender == 'Other' %}selected{% endif %}>Other</option> -->
                            </select>
                          </div>
                        
                      </div>
                    <!-- end category  -->
                      
                    <!-- Other Service Prices   -->
                    <div class="col-lg-4" id="price_col">
                    
                        <div class="form-group">
                            <label
                              class="form-control-label"
                              for="input-price"
                              >Prices</label
                            >
                            <select
                              class="form-control form-control-alternative"
                              id="input-price"
                              name="price_section"
                              required
                              
                            >
                              <option disabled selected>
                                Choose Service Type
                              </option>
                              
                              <!-- {% for category in category_data %}
                              <option
                                  value="{{ category.regular_prize }}"
                                  
                              >
                              {{ category.regular_prize }}
                              </option>
                              {% endfor %} -->

                              <!-- <option value="Other" {% if data.gender == 'Other' %}selected{% endif %}>Other</option> -->
                            </select>
                          </div>
                        
                      </div>
                      <!-- End Other Service Prices  -->

                       <!-- Sections category  -->
                       <div class="col-lg-4" id="section_col">
                    
                        <div class="form-group">
                            <label
                              class="form-control-label"
                              for="input-section"
                              >Sub Section</label
                            >
                            <select
                              class="form-control form-control-alternative"
                              id="input-section"
                              name="section_type_main"
                              required
                              onchange="loadSubCategoriesBySection(this)"
                            >
                              <option disabled selected>
                                Choose Section
                              </option>
                              
                              {% for section in section_data %}
                              <option
                                  value="{{ section.section_name }}"
                                  data-section_id="{{ section.sectionid }}"
                              >
                                  {{ section.section_name }}
                              </option>
                              {% endfor %}

                              <!-- <option value="Other" {% if data.gender == 'Other' %}selected{% endif %}>Other</option> -->
                            </select>
                          </div>
                        
                      </div>
                      <!-- End Sections  -->

                      <!-- sub category  -->
                      <!-- <div class="col-lg-4">
                    
                        <div class="form-group">
                            <label
                              class="form-control-label"
                              for="input-subcategory"
                              >Sub Category</label
                            >
                            <select
                              class="form-control form-control-alternative"
                              id="input-subcategory"
                              name="subcategory"
                              required
                            >
                              <option disabled selected>
                                Choose Sub Category
                              </option>
                              {% for category in data_all_categories %}
                              <option
                                value="{{ category.category_name }}"
                                data-catid="{{ category.expcatid }}"
                              >
                                {{ category.category_name }}
                              </option>
                              {% endfor %} 

                             
                            </select>
                          </div>
                        
                      </div> -->
                      <!-- End sub category  -->
                    

                </div>
            </form>
<hr>
                <div class="row">
             
                  
                  <div class="col-lg-6" id="other-then-dry-clean">
                    
                    <div class="form-group">
                      <label
                        for="item-quantity"
                        class="form-control-label text-secondary"
                        >Add Item Quantity in Kgs</label
                      >
                      <input
                        class="form-control form-control-alternative"
                        type="number"
                        id="item-quantity"
                        name="kgs_quantity"
                        placeholder="Add Item Quantity in Kgs [5,10]"
                        value=""
                        required
                      />
                    </div>

                  </div>

                </div>


                

                <!-- Table start  -->
                <div class="card-body px-0 pt-0 pb-2" style="height: 400px; overflow-y: scroll;">
                <div class="table-responsive p-0">
                    <table class="table align-items-center mb-0" id="subCategoryTable" style="width: 100%;">
                      <thead>
                        <tr>
                          <th
                            class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 w-50 "
                          >
                            Category Details
                          </th>
                          
                          <!-- <th
                            class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"
                          >
                            Type
                          </th> -->
                          
                         
                          <th class='text-secondary opacity-7'></th>
                          <th class='text-secondary opacity-7'>
                            <div class="col-lg-4">
                                <button class="btn btn-facebook btn-sm" id="add_to_cart" >Add To Cart</button>
                            </div>
                          </th>
                         
                        </tr>
                      </thead>
                     
                      <tbody>
                       <tr>
                        
                       </tr>
                      </tbody>
                      
                    </table>
                  </div>
                </div>
                <!-- Table End  -->

              </div>
              <!-- Action Buttons  -->

              <!-- Action Buttons End  -->
              
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-5">
        <div class="card">
          <div class="card-header pb-0 p-3">
            <div class="row d-flex justify-content-end">
              <div class="col-8 d-flex align-items-center">
                
                <div class="row">
                    
                        <form method="get">
                            {% csrf_token %}
                            <div class="form-group">
                                <input
                                    class="form-control form-control-alternative"
                                    type="search"
                                    id="customer-name"
                                    name="mobno"
                                    placeholder="Search customer phone"
                                    value=""
                                    autocomplete="off"
                                    
                                />
                            </div>
                        </form>
                        <div id="suggestion-container" style="height: 100px; overflow-y:scroll; display:none;">
                            <ul class="navbar-nav" id="suggestion-list"></ul>
                        </div>
                        <input
                            class="form-control form-control-alternative"
                            type="hidden"
                            id="selected-customer-id"
                            name="selected_customer_id"
                            value=""
                        />
                        
                        <input
                            class="form-control form-control-alternative"
                            type="hidden"
                            id="selected-mobile-no"
                            name="selected-mobile-no"
                            value=""
                        />
                        <input
                            class="form-control form-control-alternative"
                            type="hidden"
                            id="selected-customer-name"
                            name="selected-customer-name"
                            value=""
                        />
                        
                    
                </div>

              </div>
              <div class="col-4 d-flex justify-content-end">
                <button class="btn btn-primary">Add</button>
              </div>
            </div>
          </div>
        <div class="card-body p-3 pb-0">
            <div class="row d-flex justify-content-end">
                <div class="col">
                    <a class="btn btn-facebook text-xxs" id="generate-booking-id">Generate Booking ID</a>
                    <input
                            class="form-control form-control-alternative"
                            type="hidden"
                            id="selected-booking-id"
                            name="booking-id"
                            value=""
                        />
                  </div>
              <!-- <div class="col-6 d-flex justify-content-end">
                <div class="form-group">
                    <label for="date-of-order" class="form-control-label text-secondary">Order Date</label>
                  <input
                    class="form-control form-control-alternative"
                    type="date"
                    id="date-of-order"
                    name="dateoforder"
                    value=""
                    required
                  />
                </div>
              </div> -->
            </div>

            
            <!-- Table start  -->
            <div class="row">
                <div class="table table-responsive">
                    <table  class="table align-items-center mb-0"  id="cartItemsTable" style="width: 100%;">
                        <thead>
                            <th class="text-start text-xs">Service Name</th>
                            <th class="text-start text-xs">Service Type</th>
                            <th class="text-start text-xs">Cost</th>
                            <th class="text-start text-xs">Qty</th>
                        </thead>
                        <tbody>
                           <tr></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Table end  -->
          </div>
          <hr />
          <div class="card-footer px-4 pt-0 pb-2 mt-2">
            <div class="row">
              
              <div class="col-lg-12">
                <div class="row justify-content-end align-items-end">
                    <!-- <div class="col">

                        <button class="btn btn-danger text-xxs">Clear </button>
                    </div> -->
                    <div class="col-lg-7 align-items-end">

                        <a class="btn btn-facebook text-xxs" data-bs-toggle="modal" data-bs-target="#modal-default1">Save & Continue</a>
                    </div>
                </div>
                
                
               
              </div>
            </div>
            
            <hr />
            
          </div>
        </div>
      </div>

      <!-- Place Order Modal  -->
      <div class="col-md-4">
        <div
          class="modal fade"
          id="modal-default1"
          tabindex="-1"
          role="dialog"
          aria-labelledby="modal-default"
          aria-hidden="true"
        >
          <div
            class="modal-dialog modal- modal-dialog-centered modal-"
            role="document"
          >
            <div class="modal-content">
              <form method="post" action="">
                {% csrf_token %}
                <div class="modal-body">
                  <h6 class="heading-small text-muted mb-4">
                    Order Details
                  </h6>
                  <div class="pl-lg-4">
                    <div class="row">
                      <div class="col">
                        <hr />
                        <p class="text-small">Add Ons:</p>
                        <div class="row">
                            <div class="col">
                                <div id="checkboxes"></div>
                            </div>
                        </div>
                        
                        <div id="delivery-charges-container">
                            <hr />
                            <!-- This is where the checkbox will be added -->
                        </div>
                        <hr />
                        <div class="row">
                          <div class="col-lg-6">
                            <div class="form-group">
                              <label
                                for="date-of-delivery"
                                class="form-control-label"
                                >Estimated Delivery Date *</label
                              >
                              <input
                                class="form-control form-control-alternative"
                                type="date"
                                id="date-of-delivery"
                                name="dateofdelivery"
                                value=""
                                required
                              />
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <div class="form-group">
                              <label
                                for="discount-label"
                                class="form-control-label"
                                >Discounts *</label
                              >
                              <input
                                class="form-control form-control-alternative"
                                type="text"
                                id="discounted-input"
                                name="discount-value"
                                value=""
                                placeholder="Enter if any discount"
                                required
                              />
                            </div>
                          </div>
                        </div>
                        <hr />
                        <div class="row">
                          <div class="col-lg-6">
                            <p class="mb-0"><small>Sub Total:</small></p>
                            <p class="mb-0"><small>Addon:</small></p>
                            <p class="mb-0"><small>Delivery Charges:</small></p>
                            <p class="mb-0"><small>Discount (%):</small></p>
                            <!-- <p class="mb-0"><small>Tax(18%):</small></p> -->
                          </div>
                          <div
                            class="col-lg-6 d-flex flex-column align-items-end"
                          >
                            <p class="mb-0"><small id="sub-total">Rs.0/-</small></p>
                            <p class="mb-0"><small id="addons-total">Rs.0/-</small></p>
                            <p class="mb-0"><small id="delivery-charges">Rs.0/-</small></p>
                            <p class="mb-0"><small id="discount-amount">Rs.0/-</small></p>
                            <!-- <p class="mb-0"><small id="tax-total">Rs.0/-</small></p> -->
                          </div>
                        </div>
                        <hr />
                        <div class="row">
                          <div class="col-lg-6"><h6>Gross Total</h6></div>
                          <div
                            class="col-lg-6 d-flex flex-column align-items-end"
                          >
                            <h6 id="gross-total">Rs 0</h6>
                          </div>
                        </div>

                        <hr />
                        <div class="row">
                          
                          <div class="col-lg-6">
                            <div class="form-group">
                              <label
                                class="form-control-label"
                                for="input-paymentmode"
                                >Payment Mode</label
                              >
                              <select
                                class="form-control form-control-alternative"
                                id="input-paymentmode"
                                name="payment_mode"
                                required
                              >
                                <option disabled selected>
                                  Choose Payment Mode
                                </option>
                                <option value="Cash">Cash</option>
                                <option value="UPI">UPI</option>
                                <option value="Card">Card</option>
                                <option value="Cheque">Cheque</option>
                                <option value="Bank Transfer">
                                  Bank Transfer
                                </option>
                                <!-- <option value="Other" {% if data.gender == 'Other' %}selected{% endif %}>Other</option> -->
                              </select>
                            </div>
                          </div>

                          <div class="col-lg-6">
                            <div class="form-group">
                                <button type="submit" id="pay-button" class="btn btn-primary my-4">Pay Now</button>
                            </div>
                          </div>
                        </div>

                        <!-- <hr />
                        <div class="row">
                          <div class="col-lg-6">
                            <h6>Balance Amount</h6>
                          </div>
                          <div class="col-lg-6 d-flex justify-content-end">
                            <h6>Rs.0/-</h6>
                          </div>
                        </div> -->
                        <hr />

                        <div class="pl-lg-4">
                          <div class="form-group">
                            <label>Notes</label>
                            <textarea
                              rows="4"
                              class="form-control form-control-alternative"
                              placeholder="Enter Notes"
                              name="notes"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn bg-gradient-success" >
                    Save & Print
                  </button>

                  <button
                    type="button"
                    class="btn btn-link ml-auto"
                    data-bs-dismiss="modal"
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <!-- Place Order Modal End  -->
    </div>
   
  </div>
</main>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="{% static 'js/on_counter.js' %}"></script>
    


{% endblock  %}

