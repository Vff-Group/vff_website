{% extends "base/base.html" %}
{% load static %}
{% block title %}Add New input-product-description{% endblock title%}
{% block content %}



  <div class="container-fluid py-4">
    
    <div class="row">
      <div class="col-12">
        <div class="card mb-4">
          <div class="card-header pb-0 d-flex justify-content-between">
            <h6>Add New Product</h6>
            
          </div>

          <div class="card-body px-0 pt-0 pb-2">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="pl-lg-4 m-4">
                    <!-- Existing form fields... -->
                    <!-- Row 1 -->
      <div class="form-row">

        <!-- Item Name, Brand, Category -->
        <div class="form-group col-md-6">
          <label for="item_name">Item Name:</label>
          <input type="text" class="form-control" id="item_name" name="item_name" required>
        </div>

        <div class="form-group col-md-6">
          <label for="brand">Brand:</label>
          <input type="text" class="form-control" id="brand" name="brand">
        </div>

        <div class="form-group col-md-6">
          <label for="category">Category:</label>
          <select class="form-control" id="category" name="category" required>
            <option value="shirt">Shirt</option>
            <option value="pants">Pants</option>
            <option value="shoes">Shoes</option>
            <!-- Add more categories as needed -->
          </select>
        </div>

        <!-- Quantity, Size, Additional Sizes -->
        <div class="form-group col-md-6">
          <label for="quantity">Quantity:</label>
          <input type="number" class="form-control" id="quantity" name="quantity" min="1" required>
        </div>

        <div class="form-group col-md-6">
          <label for="size">Size:</label>
          <input type="text" class="form-control" id="size" name="size">
        </div>

        <div class="form-group col-md-6">
          <label for="additional_sizes">Additional Sizes (comma-separated):</label>
          <input type="text" class="form-control" id="additional_sizes" name="additional_sizes">
        </div>

        <!-- Color, Material, Price -->
        <div class="form-group col-md-6">
          <label for="color">Color:</label>
          <input type="text" class="form-control" id="color" name="color">
        </div>

        <div class="form-group col-md-6">
          <label for="material">Material:</label>
          <input type="text" class="form-control" id="material" name="material">
        </div>

        <div class="form-group col-md-6">
          <label for="price">Price:</label>
          <input type="number" class="form-control" id="price" name="price" step="0.01" required>
        </div>

        <!-- Discount, Purchase Date, Description -->
        <div class="form-group col-md-6">
          <label for="discount">Discount (%):</label>
          <input type="number" class="form-control" id="discount" name="discount" min="0" max="100">
        </div>

        <div class="form-group col-md-6">
          <label for="purchase_date">Purchase Date:</label>
          <input type="date" class="form-control" id="purchase_date" name="purchase_date" required>
        </div>

        <div class="form-group col-md-12">
          <label for="description">Description:</label>
          <textarea class="form-control" id="description" name="description" rows="4"></textarea>
        </div>

        <!-- Images, Supplier, Seasonal Availability -->
        <div class="form-group col-md-6">
          <label for="image">Images (upload multiple):</label>
          <input type="file" class="form-control" id="image" name="image" accept="image/*" multiple>
        </div>

        <div class="form-group col-md-6">
          <label for="supplier">Supplier:</label>
          <input type="text" class="form-control" id="supplier" name="supplier">
        </div>

        <div class="form-group col-md-6">
          <label for="seasonal_availability">Seasonal Availability:</label>
          <select class="form-control" id="seasonal_availability" name="seasonal_availability">
            <option value="spring">Spring</option>
            <option value="summer">Summer</option>
            <option value="autumn">Autumn</option>
            <option value="winter">Winter</option>
            <option value="all_seasons">All Seasons</option>
          </select>
        </div>

        <!-- On Sale, Restock Date -->
        <div class="form-group col-md-6">
          <label for="on_sale">On Sale:</label>
          <input type="checkbox" id="on_sale" name="on_sale">
        </div>

        <div class="form-group col-md-6">
          <label for="restock_date">Restock Date:</label>
          <input type="date" class="form-control" id="restock_date" name="restock_date">
        </div>
      </div>

      <!-- Add other sections in a similar way -->

      <!-- Submit Button -->
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Add to Inventory</button>
      </div>

                </div>
            </form>
        </div>

        <!-- Include jscolor library from CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.4.5/jscolor.min.js"></script>
        <!-- Include Dropzone.js library -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dropzone@5.9.2/dist/dropzone.css">
        <script src="https://cdn.jsdelivr.net/npm/dropzone@5.9.2/dist/dropzone.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            function addVariant() {
              const variantsContainer = document.getElementById('variants-container');
              const variantCount = variantsContainer.getElementsByClassName('variant').length + 1;
        
              const newVariantDiv = document.createElement('div');
              newVariantDiv.className = 'variant';
        
              newVariantDiv.innerHTML = `
                <label for="variant_size_${variantCount}">Size:</label>
                <input type="text" id="variant_size_${variantCount}" name="variant_size_${variantCount}">
        
                <label for="variant_color_${variantCount}">Color:</label>
                <input type="text" id="variant_color_${variantCount}" name="variant_color_${variantCount}">
        
                <label for="variant_image_${variantCount}">Image (upload multiple):</label>
                <input type="file" id="variant_image_${variantCount}" name="variant_image_${variantCount}" accept="image/*" multiple>
              `;
        
              variantsContainer.appendChild(newVariantDiv);
            }
          </script>
          
        <script>
            document.getElementById('input-images').addEventListener('change', function () {
                previewImages(this);
            });
        
            function previewImages(input) {
                var previewContainer = document.getElementById('image-preview-container');
                previewContainer.innerHTML = ''; // Clear previous previews
        
                var files = input.files;
                for (var i = 0; i < files.length; i++) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var imageElement = document.createElement('img');
                        imageElement.src = e.target.result;
                        imageElement.className = 'preview-image';
                        previewContainer.appendChild(imageElement);
                    };
                    reader.readAsDataURL(files[i]);
                }
            }
        </script>
        
       

        <!-- <script>
            // Customize the appearance and behavior of Dropzone
            Dropzone.autoDiscover = false;
        
            // Initialize Dropzone on the specified element
            var myDropzone = new Dropzone("#image-dropzone", {
                url: "/your-upload-endpoint",
                paramName: "file", // The name that will be used to transfer the file
                maxFilesize: 5, // MB
                maxFiles: 10,
                acceptedFiles: "image/*",
                addRemoveLinks: true, // Add remove links for uploaded files
                dictRemoveFile: "Remove", // Label for the remove link
                init: function () {
                    this.on("addedfile", function (file) {
                        // Display the file preview in the preview container
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            var imageElement = document.createElement("img");
                            imageElement.src = e.target.result;
                            document.getElementById("image-preview-container").appendChild(imageElement);
                        };
                        reader.readAsDataURL(file);
                    });
        
                    this.on("removedfile", function (file) {
                        // Remove the file preview from the preview container
                        var previewContainer = document.getElementById("image-preview-container");
                        var previews = previewContainer.getElementsByTagName("img");
                        for (var i = 0; i < previews.length; i++) {
                            if (previews[i].src.includes(file.dataURL)) {
                                previewContainer.removeChild(previews[i]);
                                break;
                            }
                        }
                    });
                },
            });
        </script> -->
        
        <script>
           // Function to preview selected images
          //function previewImages(input) {
          //    var previewContainer = document.getElementById('image-preview-container');
          //    previewContainer.innerHTML = ''; // Clear previous previews

          //    if (input.files) {
          //        for (var i = 0; i < input.files.length; i++) {
          //            var reader = new FileReader();
          //            reader.onload = function (e) {
          //                var imgElement = document.createElement('img');
          //                imgElement.src = e.target.result;
          //                imgElement.className = 'img-thumbnail';
          //                imgElement.style.width = '100px'; // Set the fixed width
          //                imgElement.style.height = '100px'; // Set the fixed height
          //                imgElement.style.marginRight = '5px'; // Set the fixed height
          //                previewContainer.appendChild(imgElement);
          //            };
          //            reader.readAsDataURL(input.files[i]);
          //        }
          //    }
          //}

          //// Attach the previewImages function to the change event of the image input
          //document.getElementById('input-images').addEventListener('change', function () {
          //    previewImages(this);
          //});

           
            // Function to add a new color input field
          // function addColorInput() {
          //     var colorInputContainer = document.getElementById('color-input-container');
        
          //     // Create a new color input field
          //     var newColorInput = document.createElement('div');
          //     newColorInput.className = 'input-group mb-3 me-3';
        
          //     // Color input field using HTML color picker
          //     var inputField = document.createElement('input');
          //     inputField.type = 'color';
          //     inputField.className = 'form-control form-control-sm rounded';
          //     inputField.name = 'colors[]';
          //     inputField.required = true;
        
          //     // Delete button
          //     var deleteButton = document.createElement('button');
          //     deleteButton.type = 'button';
          //     deleteButton.className = 'btn btn-outline-danger rounded-start';
          //     deleteButton.textContent = '-';
          //     deleteButton.addEventListener('click', function() {
          //         removeColorInput(newColorInput);
          //     });
        
          //     // Append elements to the new color input field
          //     newColorInput.appendChild(inputField);
          //     newColorInput.appendChild(deleteButton);
        
          //     // Append the new color input field to the container
          //     colorInputContainer.appendChild(newColorInput);
          // }
        
          // // Function to remove a color input field
          // function removeColorInput(element) {
          //     var colorInputContainer = document.getElementById('color-input-container');
          //     colorInputContainer.removeChild(element);
          // }
        </script>

        <script>
            // Function to add a new color input field
            function addColorInput() {
                var colorInputContainer = document.getElementById('color-input-container');
        
                // Create a new color input field
                var newColorInput = document.createElement('div');
                newColorInput.className = 'input-group mb-3 me-3';
        
                // Color input field using HTML color picker
                var inputField = document.createElement('input');
                inputField.type = 'color';
                inputField.className = 'form-control form-control-sm rounded';
                inputField.name = 'colors[]';
                inputField.required = true;
        
                // Delete button with Flaticon or other delete icon
                var deleteButton = document.createElement('button');
                deleteButton.type = 'button';
                deleteButton.className = 'btn btn-outline-danger rounded-start';
                // Use the Flaticon or other delete icon here
                deleteButton.innerHTML = '<i class="fas fa-trash-alt delete-icon"></i>';
                deleteButton.addEventListener('click', function() {
                    removeColorInput(newColorInput);
                });
        
                // Append elements to the new color input field
                newColorInput.appendChild(inputField);
                newColorInput.appendChild(deleteButton);
        
                // Append the new color input field to the container
                colorInputContainer.appendChild(newColorInput);
            }
        
            // Function to remove a color input field
            function removeColorInput(element) {
                var colorInputContainer = document.getElementById('color-input-container');
                colorInputContainer.removeChild(element);
            }
        </script>
        
    {% endblock  %}        