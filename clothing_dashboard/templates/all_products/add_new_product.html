{% extends "base/base.html" %}
{% load static %}
{% block title %}Add New Purchase Order{% endblock title%}
{% block content %}

  <div class="container-fluid py-4">
    
    <div class="row">
      <div class="col-12">
        <div class="card mb-4">
          <div class="card-header pb-0 d-flex justify-content-between">
            <h6>Add New Purchase Order</h6>
            
          </div>

          <div class="card-body px-0 pt-0 pb-2">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="pl-lg-4 m-4">
                    <!-- Existing form fields... -->
        
                    <!-- New fields for multiple images, product name, description, fit and care, and return policy -->
                    <div class="row mb-4">
                        <!-- Multiple Images Upload -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="form-control-label" for="input-images">Product Images</label>
                                <input type="file" id="input-images" class="form-control form-control-alternative" name="product_images[]" multiple accept="image/*">
                                <!-- Preview container for images -->
                                <div id="image-preview-container"></div>
                            </div>
                        </div>
        
                        <!-- Product Name -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="form-control-label" for="input-product-name">Product Name</label>
                                <input type="text" id="input-product-name" class="form-control form-control-alternative" placeholder="Enter Product Name" name="product_name" autocomplete="off" required>
                            </div>
                        </div>
                    </div>

                    <!-- Checkboxes for Sizes -->
                     <div class="row mb-4">
                             <!-- Dropdown for Color -->
                          <div class="col-lg-3">
                              <div class="form-group">
                                  <label class="form-control-label" for="input-color">Color</label>
                                  <select id="input-color" class="form-control form-control-alternative" name="color" required>
                                      <option value="">Select Color</option>
                                      <!-- Add options dynamically based on your colors -->
                                      <option value="red">Red</option>
                                      <option value="blue">Blue</option>
                                  </select>
                              </div>
                          </div>
            
                         <div class="col-lg-9">
                             <label class="form-control-label">Sizes Available</label>
                         </div>
                         <!-- Add checkboxes dynamically based on your available sizes -->
                         <div class="col-lg-1">
                             <div class="form-check">
                                 <input class="form-check-input" type="checkbox" id="sizeCheckbox1" name="sizes[]" value="S">
                                 <label class="form-check-label" for="sizeCheckbox1">S</label>
                             </div>
                         </div>
                         <div class="col-lg-1">
                             <div class="form-check">
                                 <input class="form-check-input" type="checkbox" id="sizeCheckbox2" name="sizes[]" value="M">
                                 <label class="form-check-label" for="sizeCheckbox2">M</label>
                             </div>
                         </div>
                         <!-- Add more checkboxes for other sizes as needed -->
                     </div>

                    <div class="row mb-4">
                        <!-- Dropdown for Product Type -->
                           <div class="col-lg-3">
                               <div class="form-group">
                                   <label class="form-control-label" for="input-product-type">Product Type</label>
                                   <select id="input-product-type" class="form-control form-control-alternative" name="product_type" required>
                                       <option value="">Select Product Type</option>
                                       <!-- Add options dynamically based on your product types -->
                                       <option value="type1">Type 1</option>
                                       <option value="type2">Type 2</option>
                                   </select>
                               </div>
                           </div>
                        
                    </div>


        
                    <!-- Description, Fit and Care, and Return Policy Textareas -->
                    <div class="row mb-4">
                        <!-- Product Description -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="form-control-label" for="input-product-description">Product Description</label>
                                <textarea id="input-product-description" class="form-control form-control-alternative" placeholder="Enter Product Description" name="product_description" rows="3" required></textarea>
                            </div>
                        </div>
        
                        <!-- Fit and Care Information -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="form-control-label" for="input-fit-care">Fit and Care Information</label>
                                <textarea id="input-fit-care" class="form-control form-control-alternative" placeholder="Enter Fit and Care Information" name="fit_care" rows="3" required></textarea>
                            </div>
                        </div>
        
                        <!-- Return Policy -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="form-control-label" for="input-return-policy">Return Policy</label>
                                <textarea id="input-return-policy" class="form-control form-control-alternative" placeholder="Enter Return Policy" name="return_policy" rows="3" required></textarea>
                            </div>
                        </div>
                    </div>
        
                    <!-- Existing form fields... -->
        
                    <button type="submit" class="btn btn-primary">Add New Product</button>
                </div>
            </form>
        </div>
        
        <script>
            // Function to preview selected images
            function previewImages(input) {
                var previewContainer = document.getElementById('image-preview-container');
                previewContainer.innerHTML = ''; // Clear previous previews
        
                if (input.files) {
                    for (var i = 0; i < input.files.length; i++) {
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            var imgElement = document.createElement('img');
                            imgElement.src = e.target.result;
                            imgElement.className = 'img-thumbnail';
                            previewContainer.appendChild(imgElement);
                        };
                        reader.readAsDataURL(input.files[i]);
                    }
                }
            }
        
            // Attach the previewImages function to the change event of the image input
            document.getElementById('input-images').addEventListener('change', function () {
                previewImages(this);
            });
        </script>
    {% endblock  %}        